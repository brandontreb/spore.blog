{
  "name": "WordPress Programming Tip: Enable Database Error Reporting For Custom Queries",  
  "content": "So this one should seem pretty obvious, but it wasn\u0026#8217;t apparent to me at first. \u0026nbsp;It was only after digging through the wp-db.php file that I discovered how to enable error reporting.\n\n#### The Problem\n\nAs you may have discovered, the wp_query() function isn\u0026#8217;t a \u0026#8220;one size fit\u0026#8217;s all\u0026#8221; solution. \u0026nbsp;Often times, you may need to query the WordPress database using a custom MySQL query. \u0026nbsp;Especially \u0026nbsp;if you are using WordPress for anything other than a blog (ie [freshapps.com][1]).\n\nWhen writing custom queries, it can often be frustrating if you make a mistake in the SQL syntax as WordPress will simply display no results. \u0026nbsp;For example:\n\n\u003cdiv class=\"wp_syntax\"\u003e\n  \u003ctable\u003e\n    \u003ctr\u003e\n      \u003ctd class=\"code\"\u003e\n        \u003cpre class=\"php\" style=\"font-family:monospace;\"\u003e\u003cspan style=\"color: #000088;\"\u003e$results\u003c/span\u003e \u003cspan style=\"color: #339933;\"\u003e=\u003c/span\u003e \u003cspan style=\"color: #000088;\"\u003e$wpdb\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #004000;\"\u003eget_results\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#40;\u003c/span\u003e\u003cspan style=\"color: #0000ff;\"\u003e\"SELECT * FROM \u003cspan style=\"color: #006699; font-weight: bold;\"\u003e$wpdb-\u0026gt;posts\u003c/span\u003e \n   WHERE post_title = ‘foo bar baz\"\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#41;\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e;\u003c/span\u003e\n\u003cspan style=\"color: #990000;\"\u003eprint_r\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#40;\u003c/span\u003e\u003cspan style=\"color: #000088;\"\u003e$results\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#41;\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e;\u003c/span\u003e\n\u0026nbsp;\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// Outputs Array ( )\u003c/span\u003e\u003c/pre\u003e\n      \u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/table\u003e\n\u003c/div\u003e\n\nSince we have made an error in our SQL statement (I didn\u0026#8217;t add the second single quote), WordPress will suppress it and simply return an empty array. This is not very helpful for debugging.\n\n#### The Solution\n\nThe solution is actually quite simple. The global $wpdb object has a property called show_errors. Setting this property to true will cause WordPress to output the SQL errors to the screen for a given query.\n\nHere it is with our example above\n\n\u003cdiv class=\"wp_syntax\"\u003e\n  \u003ctable\u003e\n    \u003ctr\u003e\n      \u003ctd class=\"code\"\u003e\n        \u003cpre class=\"php\" style=\"font-family:monospace;\"\u003e\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// Enables Wordpress’s DB Error reporting\u003c/span\u003e\n\u003cspan style=\"color: #000088;\"\u003e$wpdb\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #004000;\"\u003eshow_errors\u003c/span\u003e \u003cspan style=\"color: #339933;\"\u003e=\u003c/span\u003e \u003cspan style=\"color: #009900; font-weight: bold;\"\u003etrue\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e;\u003c/span\u003e\n\u0026nbsp;\n\u003cspan style=\"color: #000088;\"\u003e$results\u003c/span\u003e \u003cspan style=\"color: #339933;\"\u003e=\u003c/span\u003e \u003cspan style=\"color: #000088;\"\u003e$wpdb\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e-\u0026gt;\u003c/span\u003e\u003cspan style=\"color: #004000;\"\u003eget_results\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#40;\u003c/span\u003e\u003cspan style=\"color: #0000ff;\"\u003e\"SELECT * FROM \u003cspan style=\"color: #006699; font-weight: bold;\"\u003e$wpdb-\u0026gt;posts\u003c/span\u003e \n   WHERE post_title = ‘foo bar baz\"\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#41;\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e;\u003c/span\u003e\n\u003cspan style=\"color: #990000;\"\u003eprint_r\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#40;\u003c/span\u003e\u003cspan style=\"color: #000088;\"\u003e$results\u003c/span\u003e\u003cspan style=\"color: #009900;\"\u003e\u0026#41;\u003c/span\u003e\u003cspan style=\"color: #339933;\"\u003e;\u003c/span\u003e\n\u0026nbsp;\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// Outputs \u003c/span\u003e\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// WordPress database error: [You have an error in your \u003c/span\u003e\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// SQL syntax; check the manual that corresponds to your \u003c/span\u003e\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// MySQL server version for the right syntax to use near \u003c/span\u003e\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// ”foo bar baz’ at line 1]\u003c/span\u003e\n\u003cspan style=\"color: #666666; font-style: italic;\"\u003e// SELECT * FROM wp_posts WHERE post_title = ‘foo bar baz\u003c/span\u003e\u003c/pre\u003e\n      \u003c/td\u003e\n    \u003c/tr\u003e\n  \u003c/table\u003e\n\u003c/div\u003e\n\nNow we know what went wrong with our query rather than just receiving empty results.\n\nLet me know if you have any questions or comments.\n\nHappy WPCoding!\n\n\u003cdiv class=\"zemanta-pixie\" style=\"margin-top:10px;height:15px\"\u003e\n  \u003ca class=\"zemanta-pixie-a\" href=\"http://reblog.zemanta.com/zemified/a1d99446-c73f-4722-97e6-3e584300069e/\" title=\"Reblog this post [with Zemanta]\"\u003e\u003cimg class=\"zemanta-pixie-img\" src=\"http://img.zemanta.com/reblog_e.png?x-id=a1d99446-c73f-4722-97e6-3e584300069e\" alt=\"Reblog this post [with Zemanta]\" style=\"border:none;float:right\" /\u003e\u003c/a\u003e\u003cspan class=\"zem-script more-related pretty-attribution\"\u003e\u003c/span\u003e\n\u003c/div\u003e\n\n\u003cdiv style=\"\"\u003e\n  \u003ca href=\"http://twitter.com/share\" class=\"twitter-share-button\" data-count=\"horizontal\" data-text=\"WordPress Programming Tip: Enable Database Error Reporting For Custom Queries\" data-url=\"http://brandontreb.com/wordpress-programming-tip-enable-database-error-reporting-for-custom-queries\"  data-via=\"brandontreb\" data-related=\"brandontreb:\"\u003eTweet\u003c/a\u003e\n\u003c/div\u003e\n\n [1]: http://freshapps.com\n",
  "permalink" : "https://brandontreb.ngrok.io/2010/03/12/wordpress-programming-tip-enable-database-error-reporting-for-custom-queries/",
  "date":"2010-03-12T00:00:00Z","draft":false,"iscjklanguage":false,"lastmod":"2010-03-12T00:00:00Z","post_type":"article","publishdate":"2010-03-12T00:00:00Z","slug":"wordpress-programming-tip-enable-database-error-reporting-for-custom-queries","tags":["Wordpress"],"title":"WordPress Programming Tip: Enable Database Error Reporting For Custom Queries","type":"post"
}