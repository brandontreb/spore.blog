<!DOCTYPE html>
<html lang="en">

<head>
  <%- include('./partials/head'); %>

  <script>
  var row;

  function start(){  
    row = event.target; 
  }
  function dragover(){
    var e = event;
    e.preventDefault(); 
    
    let children= Array.from(e.target.parentNode.parentNode.children);
    
    if(children.indexOf(e.target.parentNode)>children.indexOf(row))
      e.target.parentNode.after(row);
    else if(children.indexOf(e.target.parentNode)<children.indexOf(row))
      e.target.parentNode.before(row);    
  }

  function ondragdrop(){
    var e = event;
    e.preventDefault(); 
   /*  e.target.parentNode.after(row);
    let children= Array.from(e.target.parentNode.parentNode.children);
    let order = children.map(function(child){
      return child.children[0].children[1].innerText;
    });
    console.log(order);*/
  }
  </script>

</head>

<body class="container">
  <header>
    <%- include('./partials/header'); %>
  </header>
  <main>
    <content>
      <button type="button" onclick="window.location.href='/admin/pages/new'">New Page</button>      
      <table>
      <% pages.forEach(function(page) { %>
      <t >        
        <td><a href="/admin/pages/<%= page.frontMatter.slug %>"><%= page.frontMatter.title %></a></td>        
        <td>/<%= page.frontMatter.slug %></td>                
      </tr>
      <% }); %>
      </table>      
    </content>
  </main>
  <footer>
    <%- include('./partials/footer'); %>
  </footer>

</body>

</html>